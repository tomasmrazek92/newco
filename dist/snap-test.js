"use strict";(()=>{var r=class{constructor(t,e){this.container=t;this.sections=e;this.isAnimating=!1;this.isScrollingWithinSection=!1;this.currentSectionIdx=0;this.prevDir=null;this.prevScrollStrength=0;this.targetX=0;this.onScrollBound=this.onScroll.bind(this);this.onMouseWheelBound=this.onMouseWheel.bind(this);this.onKeyDownBound=this.onKeyDown.bind(this);this.onResizeBound=this.onResize.bind(this);gsap.registerPlugin(ScrollToPlugin)}start(){window.addEventListener("scroll",this.onScrollBound),window.addEventListener("wheel",this.onMouseWheelBound,{passive:!1}),window.addEventListener("keydown",this.onKeyDownBound,{passive:!1}),window.addEventListener("resize",this.onResizeBound)}kill(){window.removeEventListener("scroll",this.onScrollBound),window.removeEventListener("wheel",this.onMouseWheelBound),window.removeEventListener("keydown",this.onKeyDownBound),window.removeEventListener("resize",this.onResizeBound),gsap.killTweensOf(window)}gotoIdx(t,e=!1,i=!1){if(this.isAnimating)return;let o=this.currentSectionIdx<t?1:0;this.currentSectionIdx=t,this.isAnimating=!e,this.isScrollingWithinSection=!1;let s=this.sections[this.currentSectionIdx];this.targetX=s.offsetLeft,i&&o===0&&s.offsetWidth>window.innerWidth&&(this.targetX=s.offsetLeft+s.offsetWidth-window.innerWidth),gsap.to(window,{scrollTo:{x:this.targetX,y:0},duration:e?0:r.SCROLL_DUR,ease:r.SCROLL_EASE_BETWEEN_SECTIONS,onComplete:()=>{this.isAnimating=!1}}),window.dispatchEvent(new CustomEvent("go_to_section",{detail:t}))}scrollWithinSection(t){if(this.isAnimating)return;let e=Math.abs(t.deltaY)>0?t.deltaY:t.deltaX,i=e>0?1:0;if(!this.isScrollingWithinSection&&Math.abs(e)<this.prevScrollStrength&&i===this.prevDir)return!0;this.targetX+=e*r.SCROLL_STRENGTH_MULTIPLIER;let o=this.sections[this.currentSectionIdx],s=o.offsetLeft,c=o.offsetLeft+o.offsetWidth-window.innerWidth;this.targetX=this.clamp(s,this.targetX,c),this.isScrollingWithinSection||(this.isScrollingWithinSection=!0,this.smoothScrollWithinSection());let l=window.scrollX,a=30;return i===0&&l>s+a||i===1&&l<c-a}smoothScrollWithinSection(){let t=window.scrollX,e=this.targetX-t,i=r.SCROLL_EASE_WITHIN_SECTION;gsap.set(window,{scrollTo:{x:t+e*i,y:0}}),this.isScrollingWithinSection&&requestAnimationFrame(this.smoothScrollWithinSection.bind(this))}go(t){this.prevDir=t;let e=this.currentSectionIdx+(t===1?1:-1);e=this.clamp(0,e,this.sections.length-1),e!==this.currentSectionIdx&&this.gotoIdx(e,!1,!0)}clamp(t,e,i){return Math.min(Math.max(e,t),i)}onScroll(t){}onMouseWheel(t){t.preventDefault(),t.stopImmediatePropagation();let e=Math.abs(t.deltaY)>0?t.deltaY:t.deltaX;if(Math.abs(e)<r.MIN_SCROLL_STRENGTH){this.prevScrollStrength=0;return}if(this.sections[this.currentSectionIdx].offsetWidth>window.innerWidth&&this.scrollWithinSection(t))return;let o=e>0?1:0;(Math.abs(e)>this.prevScrollStrength||o!==this.prevDir)&&this.go(o),this.prevScrollStrength=Math.abs(e)}onKeyDown(t){let e=t.target.tagName.toLowerCase();if(e==="input"||e==="textarea"||e==="select"||t.target.isContentEditable)return;let i;if(t.key==="ArrowDown"||t.key==="ArrowRight")i=1;else if(t.key==="ArrowUp"||t.key==="ArrowLeft")i=0;else return;if(this.sections[this.currentSectionIdx].offsetWidth>window.innerWidth){let c=i===1?300:-300;if(this.scrollWithinSection(new WheelEvent("wheel",{deltaY:c})))return}this.go(i)}onResize(){let t=this.sections[this.currentSectionIdx];this.targetX=t.offsetLeft,gsap.set(window,{scrollTo:{x:this.targetX,y:0}}),this.isAnimating=!1}},n=r;n.SCROLL_DUR=.6,n.SCROLL_EASE_BETWEEN_SECTIONS="power2.out",n.SCROLL_EASE_WITHIN_SECTION=.1,n.SCROLL_STRENGTH_MULTIPLIER=.6,n.MIN_SCROLL_STRENGTH=10;(function(){document.readyState!=="loading"?h():document.addEventListener("DOMContentLoaded",h)})();function h(){let d=document.querySelector(".page-main"),t=new n;d.addEventListener("go_to_section",e=>{console.log("going to section",e.detail)})}})();
